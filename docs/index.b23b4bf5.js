let t;var e;let a;var n;(e=t||(t={})).none="none",e.prev="prev",e.next="next",(n=a||(a={})).m="m",n.w="w",n.d="d";const s={[a.m]:12,[a.w]:52,[a.d]:365};class r{message="When is your birthday? (Format YYYY-MM-DD)";birthDayKey="app:birthday";validator=t=>Boolean(null!==t&&new Date(t).getFullYear());constructor(){this.ask()}ask(t=localStorage.getItem(this.birthDayKey)){for(;!this.validator(t);)t=prompt(this.message);return localStorage.setItem(this.birthDayKey,t),this.value=new Date(t)}getValue(){return this.value}}new class{scale=a.w;constructor(t,e){this.root=t,this.duration=e,this.q=new r,this.start=this.q.getValue(),this.end=this.getEndRandomDate(),this.bindingEvents()}data(){const e=[],n=new Date,r=this.start.getFullYear(),i=this.end.getFullYear();let d=r;for(;d<i;){const r=[];for(let e=1;e<=s[this.scale];e++){let s;switch(this.scale){case a.d:s=new Date(d,0,e);break;case a.w:s=new Date(d,0,7*e);break;case a.m:s=new Date(d,e-1,n.getDate());break;default:throw new Error(`Not implemented scale: ${this.scale}`)}s<=this.start?r.push(t.none):s<n?r.push(t.prev):r.push(t.next)}e.push(r),d++}return e}render(){const t=t=>(e,a,n)=>`<${t} ${n?`class="${n}"`:""}>${a}</${t}>`,e=t("table"),a=t("tr"),n=t("td");this.root.innerHTML=e`${this.data().map((t=>a`${t.map((t=>n`${""}${`${t} ${this.scale}`}`)).join("")}`)).join("")}`}update({start:t,end:e,scale:a}){t&&(this.start=t),e&&(this.end=e),a&&(this.scale=a),this.render()}getEndRandomDate(){const t=this.randomDuration();this.duration.innerHTML=String(t);const e=new Date(this.start);return new Date(e.setFullYear(e.getFullYear()+t))}randomDuration(){return 50+Math.floor(40*Math.random())}bindingEvents(){Object.keys(s).forEach((t=>document.getElementById(t)?.addEventListener("click",(()=>{this.update({scale:t})})))),document.getElementById("birth")?.addEventListener("click",(()=>{this.update({start:this.q.ask(null)})})),document.getElementById("death")?.addEventListener("click",(()=>{this.update({end:this.getEndRandomDate()})}))}}(document.getElementById("container"),document.getElementById("duration")).render();
//# sourceMappingURL=index.b23b4bf5.js.map
